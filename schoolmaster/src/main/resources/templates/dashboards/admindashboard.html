<!-- Admin Dashboard -->
<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Admin Dashboard</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<link rel="stylesheet" th:href="@{/css/dashborad.css}">
</head>

<body>
	<div class="container-fluid d-flex p-0">
		<div class="sidebar bg-dark text-white p-3" style="width: 300px;">
			<h4><i class="fa-solid fa-school me-2"></i> Admin Panel</h4>
			<hr>
			<ul class="nav flex-column">
				<!-- Administrator Options -->
				<li class="nav-item" th:if="${role == 'ADMIN'}">
					<a href="#manageUsers" class="nav-link text-white section-link"><i
							class="fa-solid fa-users-cog"></i> Manage Users</a>
					<a href="#manageCourses" class="nav-link text-white section-link"><i class="fa-solid fa-book"></i>
						Manage Courses</a>
					<a href="#manageGrades" class="nav-link text-white section-link"><i
							class="fa-solid fa-graduation-cap"></i> Manage Grades</a>
					<a href="#manageFees" class="nav-link text-white section-link"><i class="fa-solid fa-wallet"></i>
						Manage Fees</a>
					<a href="#reports" class="nav-link text-white section-link"><i class="fa-solid fa-chart-bar"></i>
						Reports</a>
				</li>

				<!-- Teacher Options -->
				<li class="nav-item" th:if="${role == 'TEACHER'}">
					<a href="#manageGrades" class="nav-link text-white section-link"><i
							class="fa-solid fa-graduation-cap"></i> Manage Grades</a>
					<a href="#attendance" class="nav-link text-white section-link"><i
							class="fa-solid fa-calendar-check"></i> Attendance</a>
					<a href="#courseContent" class="nav-link text-white section-link"><i class="fa-solid fa-book"></i>
						Course Content</a>
				</li>

				<!-- Student Options -->
				<li class="nav-item" th:if="${role == 'STUDENT'}">
					<a href="#courses" class="nav-link text-white section-link"><i class="fa-solid fa-book"></i>
						Courses</a>
					<a href="#grades" class="nav-link text-white section-link"><i
							class="fa-solid fa-graduation-cap"></i> Grades</a>
					<a href="#attendance" class="nav-link text-white section-link"><i
							class="fa-solid fa-calendar-check"></i> Attendance</a>
					<a href="#feeStatus" class="nav-link text-white section-link"><i class="fa-solid fa-wallet"></i> Fee
						Status</a>
				</li>

				<!-- Parent Options -->
				<li class="nav-item" th:if="${role == 'PARENT'}">
					<a href="#studentProgress" class="nav-link text-white section-link"><i
							class="fa-solid fa-chart-line"></i> Student Progress</a>
					<a href="#attendance" class="nav-link text-white section-link"><i
							class="fa-solid fa-calendar-check"></i> Attendance</a>
					<a href="#feePayments" class="nav-link text-white section-link"><i class="fa-solid fa-wallet"></i>
						Fee Payments</a>
				</li>
			</ul>
			<hr>
			<a href="/logout" class="btn btn-light w-100"><i class="fa-solid fa-sign-out-alt me-2"></i> Logout</a>
		</div>

		<!-- Main Content -->
		<div class="main-content flex-fill bg-light">
			<!-- Dashboard Section -->
			<div id="dashboard">
				<h2>Admin Dashboard</h2>
				<div class="row">
					<div class="col-md-4">
						<div class="card text-white bg-primary mb-3">
							<div class="card-body">
								<div>
									<h5 class="card-title">Total Students</h5>
									<p class="card-text display-6">1200</p>
								</div>
								<i class="fa-solid fa-user-graduate"></i>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="card text-white bg-secondary mb-3">
							<div class="card-body">
								<div>
									<h5 class="card-title">Total Teachers</h5>
									<p class="card-text display-6">75</p>
								</div>
								<i class="fa-solid fa-chalkboard-teacher"></i>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="card text-white bg-danger mb-3">
							<div class="card-body">
								<div>
									<h5 class="card-title">Pending Fees</h5>
									<p class="card-text display-6">â‚¹50,000</p>
								</div>
								<i class="fa-solid fa-money-bill-wave"></i>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Manage Students Section -->
			<div id="manageStudents" class="hidden-section table-container">
				<h3>Manage Students</h3>
				<button class="btn btn-primary mb-3" id="addStudentBtn"><i class="fa-solid fa-plus me-2"></i>Add New
					Student</button>
				<table class="table table-bordered">
					<thead class="table-dark">
						<tr>
							<th>ID</th>
							<th>First Name</th>
							<th>Last Name</th>
							<th>admissionDate</th>
							<th>Admission Number</th>
							<th>Actions</th>
						</tr>
					</thead>
					<!--<tbody>
						<tr th:each=" stds: ${studentlist}">
							<td th:text="${stds.id}"></td>
							<td th:text="${stds.firstName}"></td>
							<td th:text="${stds.lastName}"></td>
							<td th:text="${stds.admissionNumber}"></td>
							<td th:text="${stds.admissionDate}"></td>
							<td th:text="${stds.className}"></td>
							<td>
								<button class="btn btn-warning btn-sm"><i class="fa-solid fa-pen"></i> Edit</button>
								<button class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete</button>
							</td>
						</tr>
					</tbody>-->
				</table>
			</div>

			<!-- Add Student Form -->
			<div id="addStudentForm" class="hidden-section form-container">
				<h3>Add New Student</h3>
				<form action="/admin/savestudent" method="post">
					<div class="mb-3">
						<label for="studentFirstName" class="form-label">First Name</label>
						<input type="text" class="form-control" id="studentFirstName" name="firstName"
							placeholder="Enter First Name" required>
					</div>
					<div class="mb-3">
						<label for="studentLastName" class="form-label">Last Name</label>
						<input type="text" class="form-control" id="studentLastName" name="lastName"
							placeholder="Enter Last Name" required>
					</div>
					<div class="mb-3">
						<label for="username" class="form-label">Username for student</label>
						<input type="text" class="form-control" id="username" name="username"
							placeholder="Enter username for student" required>
					</div>
					<div class="mb-3">
						<label for="password" class="form-label">Password</label>
						<input type="password" class="form-control" id="password" name="password"
							placeholder="Enter Password" required>
					</div>
					<div class="mb-3">
						<label for="admissionNumber" class="form-label">Admission Number</label>
						<input type="text" class="form-control" id="admissionNumber" name="admissionNumber"
							placeholder="Enter Admission Number" required>
					</div>
					<div class="mb-3">
						<label for="admissionDate" class="form-label">Admission Date</label>
						<input type="date" class="form-control" id="admissionDate" name="admissionDate" required>
					</div>
					<div class="mb-3">
						<label for="classId" class="form-label">Class</label>
						<select class="form-select" id="classId" name="classId" required>
							<option value="" disabled selected>Select Class</option>
							<option value="1">Class 10A</option>
							<option value="2">Class 10B</option>
							<!-- Add more class options dynamically if needed -->
						</select>
					</div>
					<button type="submit" class="btn btn-primary">Submit</button>
					<button type="button" class="btn btn-secondary" id="cancelAddStudent">Cancel</button>
				</form>
			</div>


			<!--	admin functions-->
			<!-- Manage Users Section -->
			<div id="manageUsers" class="hidden-section table-container">
				<h3>Mange Users</h3>
				<button class="btn btn-primary mb-3" id="addUserBtn"><i class="fa-solid fa-plus me-2"></i>Add New
					User</button>
				<table class="table table-bordered">
					<thead class="table-dark">
						<tr>
							<th>User ID</th>
							<th>First Name </th>
							<th>Last Name</th>
							<th>Username</th>
							<th>Role</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each=" user: ${users}">
							<td th:text="${user.userId}"></td>
							<td th:text="${user.firstName}"></td>
							<td th:text="${user.lastName}"></td>
							<td th:text="${user.username}"></td>
							<td th:text="${user.role}"></td>
							<td>
								<a th:href="@{/userDetails/{id}(id=${user.userId})}">
									<button class="btn btn-warning btn-sm">
										<i class="fa-solid fa-pen"></i> Edit
									</button>
								</a>

								<a th:href="@{/deleteUser/{id}(id=${user.userId})}">
									<button class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i>
										Delete</button>
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- Add User Form -->
			<div id="addUserForm" class="hidden-section form-container">
				<h3>Add New User</h3>
				<form action="/adminadduser" method="post">

					<div class="mb-3">
						<label for="firstName" class="form-label">First Name</label>
						<input type="text" class="form-control" id="firstName" name="firstName"
							placeholder="Enter First Name" required>
					</div>
					<div class="mb-3">
						<label for="lastName" class="form-label">Last Name</label>
						<input type="text" class="form-control" id="lastName" name="lastName"
							placeholder="Enter Last Name" required>
					</div>
					<div class="mb-3">
						<label for="username" class="form-label">Username</label>
						<input type="text" class="form-control" id="username" name="username"
							placeholder="Enter Username" required>
					</div>
					<div class="mb-3">
						<label for="password" class="form-label">Password</label>
						<input type="password" class="form-control" id="password" name="password"
							placeholder="Enter Password" required>
					</div>


					<!-- Role Selection (Pre-selected as Teacher) -->
					<div class="mb-3">
						<label for="role" class="form-label">Role</label>
						<select class="form-select" id="role" name="role" required>
							<option value="ADMIN">Admin</option>
							<option value="TEACHER">Teacher</option>
							<option value="STUDENT">Student</option>
							<option value="PARENT">Parent</option>
						</select>
					</div>

					<button type="submit" class="btn btn-primary w-100">Submit</button>
					<button type="button" class="btn btn-secondary w-100 mt-2" id="cancelAddUser">Cancel</button>
				</form>
			</div>

			<!-- Manage Courses Section -->
			<div id="manageCourses" class="hidden-section table-container">
				<h3>Manage Courses</h3>
				<button class="btn btn-primary mb-3" id="addCourseBtn">
					<i class="fa-solid fa-plus me-2"></i> Add New Course
				</button>

				<table class="table table-bordered">
					<thead class="table-dark">
						<tr>
							<th>Course ID</th>
							<th>Course Name</th>
							<th>Description</th>
							<th>Assigned Teacher</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each=" course: ${courseList}">
							<td th:text="${course.id}"></td>
							<td th:text="${course.courseName}"></td>
							<td th:text="${course.description}"></td>
							<td th:text="${course.teacherId}"></td>
							<td>
								<a th:href="@{/deletecourse/{id} id=${course.id}}">
									<button class="btn btn-warning btn-sm">
										<i class="fa-solid fa-pen"></i> Edit
									</button>
								</a>
								<a th:href="@{/deletecourse/{id}(id=${course.id}) }">
									<button class="btn btn-danger btn-sm">
										<i class="fa-solid fa-trash"></i> Delete
									</button>
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!--			 Add Course Form -->
			<div id="addCourseForm" class="hidden-section form-container">
				<h3>Add New Course</h3>
				<form action="/addcourse" method="post">
					<div class="mb-3">
						<label for="courseName" class="form-label">Course Name</label>
						<input type="text" class="form-control" id="courseName" name="courseName"
							placeholder="Enter Course Name" required>
					</div>
					<div class="mb-3">
						<label for="description" class="form-label">Description</label>
						<textarea class="form-control" id="description" name="description"
							placeholder="Enter Course Description" rows="3"></textarea>
					</div>
					<div class="mb-3">
						<label for="teacherId" class="form-label">Assign Teacher</label>
						<select class="form-select" id="teacherId" name="teacherId" required>
							<option value="" disabled selected>Select Teacher</option>
							<option th:each="teacher: ${teacherList}" th:value="${teacher.userId}"
								th:text="${teacher.firstName + ' ' + teacher.lastName}"></option>
						</select>
					</div>
					<button type="submit" class="btn btn-primary w-100">Submit</button>
					<button type="button" class="btn btn-secondary w-100 mt-2" id="cancelAddCourse">Cancel</button>
				</form>

			</div>
			
			<!-- Manage Grades Section start -->
			<div id="manageGrades" class="hidden-section table-container">
			    <h3>Manage Grades</h3>
			    <button class="btn btn-primary mb-3" id="addGradeBtn">
			        <i class="fa-solid fa-plus me-2"></i> Add New Grade
			    </button>

			    <table class="table table-bordered">
			        <thead class="table-dark">
			            <tr>
			                <th>Grade ID</th>
			                <th>Student Name</th>
			                <th>Course Name</th>
			                <th>Grade</th>
			                <th>Date Awarded</th>
			                <th>Actions</th>
			            </tr>
			        </thead>
			        <tbody>
			            <tr th:each="grade: ${gradeList}">
			                <td th:text="${grade.id}"></td>
			                <td th:text="${grade.studentId}"></td>
			                <td th:text="${grade.courseId}"></td>
			                <td th:text="${grade.grade}"></td>
			                <td th:text="${grade.dateAwarded}"></td>
			                <td>
			                    <a th:href="@{/editgrade/{id}(id=${grade.id})}">
			                        <button class="btn btn-warning btn-sm">
			                            <i class="fa-solid fa-pen"></i> Edit
			                        </button>
			                    </a>
			                    <a th:href="@{/deletegrade/{id}(id=${grade.id})}">
			                        <button class="btn btn-danger btn-sm">
			                            <i class="fa-solid fa-trash"></i> Delete
			                        </button>
			                    </a>
			                </td>
			            </tr>
			        </tbody>
			    </table>
			</div>

			<!-- Add Grade Form -->
			<div id="addGradeForm" class="hidden-section form-container">
			    <h3>Add New Grade</h3>
			    <form action="/addgrade" method="post">
			        <div class="mb-3">
			            <label for="studentId" class="form-label">Select Student</label>
			            <select class="form-select" id="studentId" name="studentId" required>
			                <option value="" disabled selected>Select Student</option>
			                <option th:each="student: ${studentlist}" th:value="${student.userId}" th:text="${student.firstName + ' ' + student.lastName}"></option>
			            </select>
			        </div>
			        <div class="mb-3">
			            <label for="courseId" class="form-label">Select Course</label>
			            <select class="form-select" id="courseId" name="courseId" required>
			                <option value="" disabled selected>Select Course</option>
			                <option th:each="course: ${courseList}" th:value="${course.id}" th:text="${course.courseName}"></option>
			            </select>
			        </div>
			        <div class="mb-3">
			            <label for="grade" class="form-label">Grade</label>
			            <input type="text" class="form-control" id="grade" name="grade" placeholder="Enter Grade (e.g., A, B+, C)" required>
			        </div>
			        <div class="mb-3">
			            <label for="dateAwarded" class="form-label">Date Awarded</label>
			            <input type="date" class="form-control" id="dateAwarded" name="dateAwarded" required>
			        </div>
			        <button type="submit" class="btn btn-primary w-100">Submit</button>
					<button type="button" class="btn btn-secondary w-100 mt-2" id="cancelAddGreade">Cancel</button>
			    </form>
			</div>

			<!-- Add Grade Form end -->
			
			
			<!-- Manage Fees Section -->
			
			<!-- Add Fee Form -->
			<div id="addFeeForm" class="hidden-section form-container">
			    <h3>Add New Fee</h3>
			    <form action="/addfee" method="post">
			        <div class="mb-3">
			            <label for="studentId" class="form-label">Select Student</label>
			            <select class="form-select" id="studentId" name="studentId" required>
			                <option value="" disabled selected>Select Student</option>
			                <option th:each="student: ${studentlist}" th:value="${student.userId}" th:text="${student.firstName + ' ' + student.lastName}"></option>
			            </select>
			        </div>
			        <div class="mb-3">
			            <label for="amount" class="form-label">Fee Amount</label>
			            <input type="number" class="form-control" id="amount" name="amount" placeholder="Enter Fee Amount" required>
			        </div>
			        <div class="mb-3">
			            <label for="dueDate" class="form-label">Due Date</label>
			            <input type="date" class="form-control" id="dueDate" name="dueDate" required>
			        </div>
			        <div class="mb-3">
			            <label for="status" class="form-label">Fee Status</label>
			            <select class="form-select" id="status" name="status" required>
			                <option value="" disabled selected>Select Fee Status</option>
			                <option value="PAID">Paid</option>
			                <option value="PENDING">Pending</option>
			                <option value="OVERDUE">Overdue</option>
			            </select>
			        </div>
			        <button type="submit" class="btn btn-primary w-100">Submit</button>
			        <button type="button" class="btn btn-secondary w-100 mt-2" id="cancelAddFee">Cancel</button>
			    </form>
			</div>

			<div id="manageFees" class="hidden-section table-container">
			    <h3>Manage Fees</h3>
			    <button class="btn btn-primary mb-3" id="addFeeBtn">
			        <i class="fa-solid fa-plus me-2"></i> Add New Fee
			    </button>

			    <table class="table table-bordered">
			        <thead class="table-dark">
			            <tr>
			                <th>Fee ID</th>
			                <th>Student Name</th>
			                <th>Amount</th>
			                <th>Due Date</th>
			                <th>Status</th>
			                <th>Actions</th>
			            </tr>
			        </thead>
			        <tbody>
			            <tr th:each="fee: ${feeList}">
			                <td th:text="${fee.id}"></td>
			                <td th:text="${fee.studentId}"></td>
			                <td th:text="${fee.amount}"></td>
			                <td th:text="${fee.dueDate}"></td>
			                <td th:text="${fee.status}"></td>
			                <td>
			                    <a th:href="@{/editfee/{id}(id=${fee.id})}">
			                        <button class="btn btn-warning btn-sm">
			                            <i class="fa-solid fa-pen"></i> Edit
			                        </button>
			                    </a>
			                    <a th:href="@{/deletefee/{id}(id=${fee.id})}">
			                        <button class="btn btn-danger btn-sm">
			                            <i class="fa-solid fa-trash"></i> Delete
			                        </button>
			                    </a>
			                </td>
			            </tr>
			        </tbody>
			    </table>
			</div>

				<!--fee section ended-->
			<!--	admin functions end-->

			<!-- Finance Section -->
			<div id="finance" class="hidden-section table-container">
				<h3>Finance</h3>
				<button class="btn btn-primary mb-3"><i class="fa-solid fa-plus me-2"></i>Add Fee Structure</button>
				<table class="table table-bordered">
					<thead class="table-dark">
						<tr>
							<th>Class</th>
							<th>Fee Amount</th>
							<th>Paid</th>
							<th>Due</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Class 10</td>
							<td>â‚¹50,000</td>
							<td>â‚¹40,000</td>
							<td>â‚¹10,000</td>
							<td>
								<button class="btn btn-warning btn-sm"><i class="fa-solid fa-pen"></i> Edit</button>
								<button class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- Reports Section -->
			<div id="reports" class="hidden-section table-container">
				<h3>Reports</h3>
				<p>Statistics and summaries will be displayed here.</p>
			</div>
		</div>
	</div>
</body>
<script th:src="@{/script/dashboard.js}"></script>

</html>